const c=t=>{switch(t){default:case"blue":return"border-blue-500";case"red":return"border-red-500";case"green":return"border-green-500";case"purple":return"border-purple-500";case"pink":return"border-pink-500"}},u=(t,e=20)=>{const r=t.lastIndexOf("."),o=t.slice(0,r),a=t.slice(r);return o.length>e?`${o.slice(0,e)}...${a}`:t},p=t=>{const e=["B","KB","MB","GB","TB"];let r=0;for(;t>=1024&&r<e.length-1;)t/=1024,r++;return`${r===0?Math.round(t):t.toFixed(2)} ${e[r]}`},s=c(window.ModusUIConfig.primary_color),i=(t,e)=>{if(t){e.placeholder.classList.add("hidden"),e.content.classList.remove("hidden");for(const r of t){const o=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span");o.classList.add("file-preview","flex","justify-between","items-center","bg-gray-100","dark:bg-gray-700","rounded","p-2","mb-2","group","hover:bg-gray-200","dark:hover:bg-gray-600","transition-all","duration-200"),a.classList.add("flex","items-center","gap-3"),n.classList.add("text-gray-900","dark:text-white","truncate","max-w-[200px]"),n.textContent=`${u(r.name,20)} (${p(r.size)})`;let d;r.type.startsWith("image/")?(d=document.createElement("img"),d.src=URL.createObjectURL(r),d.classList.add("w-6","h-6","rounded","object-cover","flex-shrink-0")):(d=document.createElement("div"),d.classList.add("flex-shrink-0","text-gray-500","dark:text-gray-400"),d.innerHTML=`<svg className="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M9 2.221V7H4.221a2 2 0 0 1 .365-.5L8.5 2.586A2 2 0 0 1 9 2.22ZM11 2v5a2 2 0 0 1-2 2H4v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-7Z" clip-rule="evenodd"/>
            </svg>`),a.appendChild(d),a.appendChild(n);const l=document.createElement("button");l.classList.add("text-gray-500","dark:text-gray-400","duration-200","p-1.5","rounded-full","group-hover:bg-red-100","group-hover:text-red-600","dark:group-hover:bg-red-900/30","dark:group-hover:text-red-400","outline-none","focus:ring-2","focus:ring-red-500/50"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>',l.addEventListener("click",()=>{o.remove(),e.content.children.length===0&&(e.placeholder.classList.remove("hidden"),e.content.classList.add("hidden"))}),o.appendChild(a),o.appendChild(l),e.content.appendChild(o)}}},h=t=>{const e=document.querySelector(`[data-dropzone-target="${t}"]`);if(!e)throw new Error(`Dropzone with target ${t} not found`);const r=e.querySelector('input[type="file"]'),o=e.querySelector(".dropzone-content"),a=e.querySelector(".dropzone-placeholder");e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add(s),console.log("dragover")}),e.addEventListener("dragleave",n=>{n.preventDefault(),e.classList.remove(s)}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove(s),n.dataTransfer&&i(n.dataTransfer.files,{placeholder:a,content:o})}),e.addEventListener("click",n=>{const d=n.target;(d===e||!d.closest(".file-preview"))&&r.click()}),r.addEventListener("change",()=>i(r.files,{placeholder:a,content:o}))};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-dropzone-target]").forEach(t=>{const e=t.getAttribute("data-dropzone-target");h(e)})});
